# Написать функцию car_rental(cars, services), которая:
#  1. Спрашивает у пользователя имя и количество пассажиров.
#  2. Позволяет арендовать машину (пока не введёт стоп).
#  3. Проверяет:
#  • есть ли такая категория,
#  • есть ли свободные машины,
#  • хватает ли мест для пассажиров.
#  4. Если всё ок → спросить количество дней.
#  5. После выбора машины → спросить про дополнительные услуги (несколько через запятую).
#  • Каждая услуга оплачивается за все дни аренды.
#  6. Сохранить заказ (машина, дни, услуги, цена).
#  7. Если сумма всех заказов > 25000 сом, то скидка 10%.
#  8. В конце вывести
#  • список арендованных машин (с услугами),
#  • итоговую сумму,
#  • остаток машин по категориям.


cars = {

    "Эконом": {"цена": 2000, "машины": 5, "макс_пассажиров": 4},
    "Комфорт": {"цена": 3500, "машины": 3, "макс_пассажиров": 5},
    "Бизнес": {"цена": 6000, "машины": 2, "макс_пассажиров": 5},
    "Внедорожник": {"цена": 8000, "машины": 2, "макс_пассажиров": 7}

}

services = {

    "Детское кресло": 500,
    "GPS-навигация": 700,
    "Страховка": 1500
}
def car_rental(cars, services):
    orders = []
    total_sum = 0

    name = input("Введите ваше имя: ")
    passengers = int(input("Введите количество пассажиров: "))

    while True:
        category = input("\nВведите категорию машины (или 'стоп' для завершения): ").capitalize()
        if category.lower() == "стоп":
            break

        # 1. Проверка категории
        if category not in cars:
            print("Такой категории нет. Попробуйте снова.")
            continue

        car_info = cars[category]

        # 2. Проверка наличия машин
        if car_info["машины"] <= 0:
            print("В этой категории нет свободных машин.")
            continue

        # 3. Проверка пассажиров
        if passengers > car_info["макс_пассажиров"]:
            print(f"В этой машине максимум {car_info['макс_пассажиров']} пассажиров.")
            continue

        # 4. Количество дней
        days = int(input("Введите количество дней аренды: "))

        # 5. Дополнительные услуги
        print("Доступные услуги:", ", ".join(services.keys()))
        chosen_services = input("Введите услуги через запятую (или оставьте пустым): ").split(",")

        chosen_services = [s.strip().capitalize() for s in chosen_services if s.strip()]

        # Подсчёт стоимости
        car_price = car_info["цена"] * days
        service_price = 0

        for s in chosen_services:
            if s in services:
                service_price += services[s] * days
            else:
                print(f"Услуга '{s}' не найдена, пропущена.")

        total_price = car_price + service_price

        # Сохраняем заказ
        orders.append({
            "категория": category,
            "дни": days,
            "услуги": chosen_services,
            "стоимость": total_price
        })

        # Уменьшаем количество машин
        cars[category]["машины"] -= 1

        total_sum += total_price
        print(f"Машина '{category}' добавлена в заказ. Стоимость: {total_price} сом.\n")

    # 7. Скидка
    discount = 0
    if total_sum > 25000:
        discount = total_sum * 0.1
        total_sum -= discount

    # 8. Итоговый вывод
    print("\n========= ИТОГ =========")
    print(f"Клиент: {name}")
    for order in orders:
        print(f"• {order['категория']} ({order['дни']} дн.), услуги: {', '.join(order['услуги']) or 'нет'}, "
              f"цена: {order['стоимость']} сом")

    print(f"\nСкидка: {discount:.0f} сом")
    print(f"Итоговая сумма: {total_sum:.0f} сом")

    print("\nОстаток машин по категориям:")
    for cat, info in cars.items():
        print(f"  {cat}: {info['машины']} шт.")

# Исходные данные
cars = {
    "Эконом": {"цена": 2000, "машины": 5, "макс_пассажиров": 4},
    "Комфорт": {"цена": 3500, "машины": 3, "макс_пассажиров": 5},
    "Бизнес": {"цена": 6000, "машины": 2, "макс_пассажиров": 5},
    "Внедорожник": {"цена": 8000, "машины": 2, "макс_пассажиров": 7}
}

services = {
    "Детское кресло": 500,
    "GPS-навигация": 700,
    "Страховка": 1500
}

car_rental(cars, services)
